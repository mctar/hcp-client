<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Human Client Protocol</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Onboarding Screen -->
    <div id="onboarding" class="screen active">
      <div class="content">
        <div class="logo">ü§ñ</div>
        <h1>Welcome to HCP</h1>
        <p class="intro">You are about to become a <strong>tool</strong> in an agentic system.</p>

        <div class="info-box">
          <h3>How it works:</h3>
          <ol>
            <li>You'll receive instructions on your screen</li>
            <li>Complete the task as described</li>
            <li>Press "Task Completed" when done</li>
            <li>Wait for the next instruction</li>
          </ol>
        </div>

        <button id="startBtn" class="primary-btn" onclick="startClient()">
          Get Started
        </button>

        <p class="disclaimer">By continuing, you agree to follow instructions provided by the system.</p>
      </div>
    </div>

    <!-- Connecting Screen -->
    <div id="connecting" class="screen">
      <div class="content">
        <div class="loader"></div>
        <h2>Connecting to Server</h2>
        <p id="connectStatus">Establishing connection...</p>
        <p class="server-info" id="serverInfo"></p>
      </div>
    </div>

    <!-- Error Screen -->
    <div id="error" class="screen">
      <div class="content">
        <div class="error-icon">‚ö†Ô∏è</div>
        <h2>Connection Error</h2>
        <p id="errorMessage">Unable to connect to the server.</p>
        <button class="primary-btn" onclick="location.reload()">Try Again</button>
      </div>
    </div>

    <!-- Idle Screen (Waiting for instruction) -->
    <div id="idle" class="screen">
      <div class="content">
        <div class="status-indicator idle-pulse">
          <div class="pulse-ring"></div>
          <div class="pulse-dot"></div>
        </div>
        <h2>Ready</h2>
        <p>Waiting for instructions...</p>
        <p class="client-id" id="clientIdDisplay"></p>
      </div>
    </div>

    <!-- Instruction Screen -->
    <div id="instruction" class="screen">
      <div class="content">
        <div class="instruction-header">
          <span class="badge">New Instruction</span>
          <span class="timestamp" id="timestamp"></span>
        </div>

        <div class="instruction-box">
          <p id="instructionText"></p>
        </div>

        <button id="completeBtn" class="primary-btn complete-btn" onclick="completeTask()">
          ‚úì Task Completed
        </button>

        <div class="help-text">
          Press the button above once you've completed the instruction
        </div>
      </div>
    </div>

    <!-- Completing Screen -->
    <div id="completing" class="screen">
      <div class="content">
        <div class="checkmark-container">
          <svg class="checkmark" viewBox="0 0 52 52">
            <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
            <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
          </svg>
        </div>
        <h2>Task Completed!</h2>
        <p>Waiting for next instruction...</p>
      </div>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
